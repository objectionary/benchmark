# SPDX-FileCopyrightText: Copyright (c) 2023-2025 Objectionary.com
# SPDX-License-Identifier: MIT
---
# yamllint disable rule:line-length
name: fuse-map-map
pattern: |
  âŸ¦
    ğµ0,
    ğœ-class â†¦ âŸ¦
      Ï† â†¦ Î¦.jeo.class,
      ğµ-class-head,
      ğœ-method â†¦ âŸ¦
        Ï† â†¦ Î¦.jeo.method,
        ğµ-method-head,
        body â†¦ âŸ¦
          ğµ-body-head,
          ğœ-reduceX â†¦ âŸ¦
            Ï† â†¦ Î¦.hone.reduceX,
            class â†¦ ğ‘’-class-name,
            method â†¦ ğ‘’-first-method-name,
            in â†¦ ğ‘’-first-input-type
          âŸ§,
          ğµ-body-tail
        âŸ§,
        ğµ-method-tail
      âŸ§,
      ğµ-class-more,
      ğœ-first-method â†¦ âŸ¦
        Ï† â†¦ Î¦.jeo.method,
        ğµ-first-method-head,
        body â†¦ âŸ¦
          ğµ-first-body-head,
          i-pop-item â†¦ ğ‘’-first-pop-item,
          i-pop-consumer â†¦ ğ‘’-first-pop-consumer,
          ğµ-first-body,
          i-invoke â†¦ ğ‘’-first-invoke,
          i-return â†¦ ğ‘’-first-return,
          ğµ-first-body-tail
        âŸ§,
        ğµ-first-method-tail
      âŸ§,
      ğµ-class-tail,
      ğµ6
    âŸ§,
    ğµ7
  âŸ§
result: |
  âŸ¦
    ğµ0,
    ğœ-class â†¦ âŸ¦
      Ï† â†¦ Î¦.jeo.class,
      ğµ1,
      ğœ-method â†¦ âŸ¦
        Ï† â†¦ Î¦.jeo.method,
        ğµ2,
        body â†¦ âŸ¦
          ğµ3,
          ğœ-fuse-opcode â†¦ âŸ¦
            Ï† â†¦ Î¦.hone.reduceX,
            class â†¦ ğ‘’-class-name,
            method â†¦ ğ‘’-fuse-method-name,
            in â†¦ ğ‘’-first-input-type,
            body â†¦ âŸ¦ ğµ-first-body âŸ§
          âŸ§,
          ğµ4
        âŸ§,
        ğµ5
      âŸ§,
      ğµ6,
    âŸ§,
    ğµ7
  âŸ§
