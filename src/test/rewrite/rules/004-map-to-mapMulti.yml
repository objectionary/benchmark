# SPDX-FileCopyrightText: Copyright (c) 2024-2025 Objectionary.com
# SPDX-License-Identifier: MIT
---
name: map-to-mapMulti
pattern: |
  âŸ¦
    ğµ0,
    ğœ1 â†¦ âŸ¦
      base â†¦ "Q.jeo.class",
      ğµ1,
      name â†¦ ğ‘’1,
      ğµ2,
      ğœ2 â†¦ âŸ¦
        base â†¦ "Q.jeo.method",
        ğµ3,
        body â†¦ âŸ¦
          ğµ4,
          ğœ3 â†¦ âŸ¦
            base â†¦ "Q.hone.lambda",
            method â†¦ "apply",
            interface â†¦ "()Ljava/util/function/Function;",
            signature â†¦ "(Ljava/lang/Object;)Ljava/lang/Object;",
            target-class â†¦ ğ‘’2,
            target-method â†¦ ğ‘’3,
            target-signature â†¦ "(Ljava/lang/Integer;)Ljava/lang/String;",
            intermediate-signature â†¦ "(Ljava/lang/Integer;)Ljava/lang/String;",
            stream-class â†¦ "java/util/stream/Stream",
            stream-method â†¦ "map",
            stream-signature â†¦ "(Ljava/util/function/Function;)Ljava/util/stream/Stream;",
            ğµ5
          âŸ§,
          ğµ6
        âŸ§,
        ğµ7
      âŸ§,
      ğµ8,
      ğœ4 â†¦ âŸ¦
        base â†¦ "Q.jeo.method",
        ğµ9,
        body â†¦ âŸ¦
          base â†¦ ğ‘’4,
          ğµ10,
          ğœ5 â†¦ âŸ¦
            base â†¦ "Q.jeo.opcode.areturn",
            ğœ6 â†¦ 176,
            ğµ11
          âŸ§,
          ğµ12
        âŸ§,
        name â†¦ "lambda$main$0",
        ğµ13
      âŸ§,
      ğµ14
    âŸ§,
    ğµ15
  âŸ§
result: |
  âŸ¦
    ğµ0,
    ğœ1 â†¦ âŸ¦
      base â†¦ "Q.jeo.class",
      ğµ1,
      name â†¦ ğ‘’1,
      ğµ2,
      ğœ2 â†¦ âŸ¦
        base â†¦ "Q.jeo.method",
        ğµ3,
        body â†¦ âŸ¦
          ğµ4,
          instruction-000 â†¦ âŸ¦
            base â†¦ "Q.hone.lambda",
            method â†¦ "accept",
            interface â†¦ "()Ljava/util/function/BiConsumer;",
            signature â†¦ "(Ljava/lang/Object;Ljava/lang/Object;)V",
            target-class â†¦ ğ‘’2,
            target-method â†¦ "fake_static_consumer",
            target-signature â†¦ "(Ljava/lang/Integer;Ljava/util/function/Consumer;)V",
            intermediate-signature â†¦ "(Ljava/lang/Integer;Ljava/util/function/Consumer;)V",
            stream-class â†¦ "java/util/stream/Stream",
            stream-method â†¦ "mapMulti",
            stream-signature â†¦ "(Ljava/util/function/BiConsumer;)Ljava/util/stream/Stream;",
            ğµ5
          âŸ§,
          ğµ6
        âŸ§,
        ğµ7
      âŸ§,
      ğµ8,
      ğœ4 â†¦ âŸ¦
        base â†¦ "Q.jeo.method",
        ğµ9,
        body â†¦ âŸ¦
          base â†¦ ğ‘’4,
          ğµ10,
          ğœ5 â†¦ âŸ¦
            base â†¦ "Q.jeo.opcode.areturn",
            ğœ6 â†¦ 176,
            ğµ11
          âŸ§,
          ğµ12
        âŸ§,
        name â†¦ "lambda$main$0",
        ğµ13
      âŸ§,
      ğµ14,
      ğœ99 â†¦ âŸ¦
        base â†¦ "Q.jeo.method",
        name â†¦ "fake_static_consumer",
        access â†¦ 4106,
        descriptor â†¦ "(Ljava/lang/Integer;Ljava/util/function/Consumer;)V",
        signature â†¦ "",
        maxs â†¦ âŸ¦
          base â†¦ "Q.jeo.maxs",
          val576 â†¦ 2,
          val577 â†¦ 2
        âŸ§,
        params â†¦ âŸ¦
          base â†¦ "Q.jeo.params",
          arg0 â†¦ âŸ¦
            base â†¦ "Q.jeo.param",
            index â†¦ 0,
            access â†¦ 0,
            type â†¦ "Ljava/lang/Integer;"
          âŸ§,
          arg1 â†¦ âŸ¦
            base â†¦ "Q.jeo.param",
            index â†¦ 1,
            access â†¦ 0,
            type â†¦ "Ljava/util/function/Consumer;"
          âŸ§
        âŸ§,
        body â†¦ âŸ¦
          base â†¦ ğ‘’4,
          instruction581 â†¦ âŸ¦
            base â†¦ "Q.jeo.opcode.aload",
            val582 â†¦ 25,
            val583 â†¦ 1
          âŸ§,
          ğµ10,
          instruction620 â†¦ âŸ¦
            base â†¦ "Q.jeo.opcode.invokeinterface",
            val621 â†¦ 185,
            val622 â†¦ "java/util/function/Consumer",
            val623 â†¦ "accept",
            val624 â†¦ "(Ljava/lang/Object;)V",
            val625 â†¦ Î¦Ì‡.true
          âŸ§,
          instruction628 â†¦ âŸ¦
            base â†¦ "Q.jeo.opcode.return",
            val629 â†¦ 177
          âŸ§
        âŸ§
      âŸ§
    âŸ§
  âŸ§
where:
  - meta: ğœ99
    function: random-tau
    args: [ 'base', 'name', '!B1', '!B2', '!a2', '!B7', '!a4', '!B11' ]
