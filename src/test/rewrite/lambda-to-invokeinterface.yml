# SPDX-FileCopyrightText: Copyright (c) 2024-2025 Objectionary.com
# SPDX-License-Identifier: MIT
---
name: lambda-to-invokeinterface
pattern: |
  âŸ¦
    ğµ1,
    ğœ â†¦ âŸ¦
      base â†¦ "Q.hone.lambda",
      method â†¦ ğ‘’1,
      interface â†¦ ğ‘’2,
      signature â†¦ ğ‘’3,
      target-class â†¦ ğ‘’4,
      target-method â†¦ ğ‘’5,
      target-signature â†¦ ğ‘’6,
      intermediate-signature â†¦ ğ‘’7,
      stream-class â†¦ ğ‘’8,
      stream-method â†¦ ğ‘’9,
      stream-signature â†¦ ğ‘’10
    âŸ§,
    ğµ2
  âŸ§
result: |
  âŸ¦
    ğµ1,
    ğœ â†¦ âŸ¦
      base â†¦ "Q.jeo.opcode.invokedynamic",
      a1 â†¦ 186,
      a2 â†¦ ğ‘’1,
      a3 â†¦ ğ‘’2,
      a4 â†¦ âŸ¦
        base â†¦ "Q.jeo.handle",
        a1 â†¦ 6,
        a2 â†¦ "java/lang/invoke/LambdaMetafactory",
        a3 â†¦ "metafactory",
        a4 â†¦ "(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/invoke/MethodType;Ljava/lang/invoke/MethodHandle;Ljava/lang/invoke/MethodType;)Ljava/lang/invoke/CallSite;",
        a5 â†¦ Î¦Ì‡.false
      âŸ§,
      a5 â†¦ âŸ¦
        base â†¦ "Q.jeo.type",
        a1 â†¦ ğ‘’3
      âŸ§,
      a6 â†¦ âŸ¦
        base â†¦ "Q.jeo.handle",
        a1 â†¦ 6,
        a2 â†¦ ğ‘’4,
        a3 â†¦ ğ‘’5,
        a4 â†¦ ğ‘’6,
        a5 â†¦ Î¦Ì‡.false
      âŸ§,
      a7 â†¦ âŸ¦
        base â†¦ "Q.jeo.type",
        a1 â†¦ ğ‘’7
      âŸ§
    âŸ§,
    xxxx â†¦ âŸ¦
      base â†¦ "Q.jeo.opcode.invokeinterface",
      a1 â†¦ 185,
      a2 â†¦ ğ‘’8,
      a3 â†¦ ğ‘’9,
      a4 â†¦ ğ‘’10,
      a5 â†¦ Î¦Ì‡.true
    âŸ§,
    ğµ2
  âŸ§
