# SPDX-FileCopyrightText: Copyright (c) 2024-2025 Objectionary.com
# SPDX-License-Identifier: MIT
---
name: map-to-mapMulti
pattern: |
  ⟦
    𝐵0,
    𝜏1 ↦ ⟦
      base ↦ "Q.jeo.class",
      𝐵1,
      name ↦ 𝑒1,
      𝐵2,
      𝜏2 ↦ ⟦
        base ↦ "Q.jeo.method",
        𝐵3,
        body ↦ ⟦
          𝐵4,
          𝜏3 ↦ ⟦
            base ↦ "Q.hone.lambda",
            method ↦ "apply",
            interface ↦ "()Ljava/util/function/Function;",
            signature ↦ "(Ljava/lang/Object;)Ljava/lang/Object;",
            target-class ↦ 𝑒1,
            target-method ↦ 𝑒2,
            target-signature ↦ "(Ljava/lang/Integer;)Ljava/lang/String;",
            intermediate-signature ↦ "(Ljava/lang/Integer;)Ljava/lang/String;",
            stream-class ↦ "java/util/stream/Stream",
            stream-method ↦ "map",
            stream-signature ↦ "(Ljava/util/function/Function;)Ljava/util/stream/Stream;"
          ⟧,
          𝐵5
        ⟧,
        𝐵6
      ⟧,
      𝐵7,
      𝜏4 ↦ ⟦
        base ↦ "Q.jeo.method",
        𝐵8,
        body ↦ ⟦
          𝐵9,
          𝜏5 ↦ ⟦
            base ↦ "Q.jeo.opcode.return",
            𝜏6 ↦ 177
          ⟧
        ⟧,
        𝐵10
      ⟧,
      𝐵11
    ⟧,
    𝐵12
  ⟧
result: |
  ⟦
    𝐵0,
    𝜏1 ↦ ⟦
      base ↦ "Q.jeo.class",
      𝐵1,
      name ↦ 𝑒1,
      𝐵2,
      𝜏2 ↦ ⟦
        base ↦ "Q.jeo.method",
        𝐵3,
        body ↦ ⟦
          𝐵4,
          instruction-000 ↦ ⟦
            base ↦ "Q.hone.lambda",
            method ↦ "accept",
            interface ↦ "()Ljava/util/function/BiConsumer;",
            signature ↦ "(Ljava/lang/Object;Ljava/lang/Object;)V",
            target-class ↦ 𝑒1,
            target-method ↦ "j$lambda$main$999",
            target-signature ↦ "(Ljava/lang/String;Ljava/util/function/Consumer;)V",
            intermediate-signature ↦ "(Ljava/lang/String;Ljava/util/function/Consumer;)V",
            stream-class ↦ "java/util/stream/Stream",
            stream-method ↦ "mapMulti",
            stream-signature ↦ "(Ljava/util/function/BiConsumer;)Ljava/util/stream/Stream;"
          ⟧,
          𝐵5
        ⟧,
        𝐵6
      ⟧,
      𝐵7,
      𝜏4 ↦ ⟦
        base ↦ "Q.jeo.method",
        𝐵8,
        body ↦ ⟦
          𝐵9,
          𝜏5 ↦ ⟦
            base ↦ "Q.jeo.opcode.return",
            𝜏6 ↦ 177
          ⟧
        ⟧,
        𝐵10
      ⟧,
      𝐵11,
      𝜏99 ↦ ⟦
        base ↦ "Q.jeo.method",
        access ↦ 4106,
        descriptor ↦ "(Ljava/lang/String;Ljava/util/function/Consumer;)V",
        signature ↦ "",
        maxs ↦ ⟦
          base ↦ "Q.jeo.maxs",
          val599 ↦ 2,
          val600 ↦ 2
        ⟧,
        params ↦ ⟦
          base ↦ "Q.jeo.params",
          arg0 ↦ ⟦
            base ↦ "Q.jeo.param",
            index ↦ 0,
            access ↦ 0,
            type ↦ "Ljava/lang/String;"
          ⟧,
          arg1 ↦ ⟦
            base ↦ "Q.jeo.param",
            index ↦ 1,
            access ↦ 0,
            type ↦ "Ljava/util/function/Consumer;"
          ⟧
        ⟧,
        body ↦ ⟦
          𝐵7,
          instruction681 ↦ ⟦
            base ↦ "Q.jeo.opcode.invokeinterface",
            val682 ↦ 185,
            val683 ↦ "java/util/function/Consumer",
            val684 ↦ "accept",
            val685 ↦ "(Ljava/lang/Object;)V",
            val686 ↦ Φ̇.true
          ⟧,
          instruction689 ↦ ⟦
            base ↦ "Q.jeo.opcode.return",
            val690 ↦ 177
          ⟧
        ⟧
      ⟧
    ⟧
  ⟧
where:
  - meta: 𝜏99
    function: random-tau
    args: [ 'base', '𝐵1', 'name', '𝐵2', '𝜏2', '𝐵7', '𝜏4', '𝐵11' ]
