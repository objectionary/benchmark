<html>
<!--
 # SPDX-FileCopyrightText: Copyright (c) 2023-2025 Objectionary.com
 # SPDX-License-Identifier: MIT
-->
<head>
  <title>EO Benchmark</title>
  <link href="https://cdn.jsdelivr.net/gh/yegor256/tacit@gh-pages/tacit-css.min.css", rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/gh/yegor256/tacit@gh-pages/drops.min.css", rel="stylesheet"/>
  <link rel="shortcut icon" href="https://www.objectionary.com/cactus.svg"/>
  <link href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono&display=swap" rel="stylesheet">
  <style>
    body { counter-reset: step; }
    section { width: 100%; height: 100%; }
    .snippet { width: 9.5%; float: left; margin-right: 1em; height: 100%; overflow-y: scroll; }
    .snippet span:first-child { display: block; border-bottom: 1px solid gray; margin-bottom: .5em; height: 5em; vertical-align: bottom; }
    .snippet span:first-child:before { content: counter(step) ") "; counter-increment: step; }
    .snippet span:first-child:after { content: ""; }
    .snippet:last-child span:first-child:after { content: ""; }
    .snippet pre { font-size: 12px; line-height: 1.2em; padding-left: 0; font-family: font-family: 'Ubuntu Mono', monospace; }
    aside { position: fixed; writing-mode: vertical-rl; right: 0; bottom: 0; }
  </style>
</head>
<body>
  <aside>The page is auto-generated by the
    <a href="https://github.com/objectionary/benchmark">Makefile</a> at 2025-06-26 07:28
.</aside>
  <section>
    <div class="snippet">
      <span>Java <a href="java.html">üîç</a></span>
      <pre>@BenchmarkMode(Mode.AverageTime)
@OutputTimeUnit(TimeUnit.MILLISECONDS)
@Warmup(iterations = 5, time = 10, timeUnit = TimeUnit.MILLISECONDS)
@Measurement(iterations = 10, time = 10, timeUnit = TimeUnit.MILLISECONDS)
@State(Scope.Benchmark)
@Fork(2)
public class Big {
    private static final Object[] VALUES = LongStream.range(0L, 10_000_000L)
        .boxed()
        .map(x -&gt; String.format("%04x", x))
        .toArray();
    @Benchmark
    public long plain() {
        long acc = 0L;
        for (int idx = 0; idx &lt; Big.VALUES.length; idx++) {
            final String str = ((String) Big.VALUES[idx]).trim();
            if (str.length() != 4) {
                continue;
            }
            acc += Long.parseLong(str, 16) + 1L;
        }
        return acc;
    }
    @Benchmark
    public long streams() {
        return Stream.of(Big.VALUES)
            .map(obj -&gt; (String) obj)
            .map(String::trim)
            .filter(str -&gt; str.length() == 4)
            .map(str -&gt; Long.parseLong(str, 16) + 1L)
            .mapToLong(num -&gt; num)
            .sum();
    }
}

@OutputTimeUnit(TimeUnit.MILLISECONDS)
@BenchmarkMode(Mode.AverageTime)
@Warmup(iterations = 5, time = 10, timeUnit = TimeUnit.MILLISECONDS)
@Measurement(iterations = 10, time = 10, timeUnit = TimeUnit.MILLISECONDS)
@State(Scope.Benchmark)
public class Cotl {
    public static class Ref {
        public int num;
        public Ref(int num) {
            this.num = num;
        }
    }
    public static final int N = 10_000_000;
    static long[] v = IntStream.range(0, N).mapToLong(i -&gt; i % 1000).toArray();
    static long[] valuesLo = valuesLo = IntStream.range(0, 10).mapToLong(i -&gt; i).toArray();
    static long[] valuesHi = IntStream.range(0, N).mapToLong(i -&gt; i).toArray();
    static Cotl.Ref[] refs = IntStream.range(0, N).mapToObj(n -&gt; new Cotl.Ref(n)).toArray(size -&gt; new Cotl.Ref[size]);
    @Benchmark
    public long sumBaseline() {
        long acc = 0;
        for (int i =0 ; i &lt; v.length ; i++) {
            acc += v[i];
        }
        return acc;
    }
    @Benchmark
    public long sumOfSquaresBaseline() {
        long acc = 0;
        for (int i =0 ; i &lt; v.length ; i++) {
            acc += v[i] * v[i];
        }
        return acc;
    }
    @Benchmark
    public long cartBaseline() {
        long cart = 0;
        for (int d = 0 ; d &lt; valuesHi.length ; d++) {
            for (int dp = 0 ; dp &lt; valuesLo.length ; dp++) {
                cart += valuesHi[d] * valuesLo[dp];
            }
        }
        return cart;
    }
    @Benchmark
    public long sumOfSquaresEvenBaseline() {
        long acc = 0;
        for (int i =0 ; i &lt; v.length ; i++) {
            if (v[i] % 2 == 0) {
                acc += v[i] * v[i];
            }
        }
        return acc;
    }
    @Benchmark
    public long sumSeq() {
        long sum = LongStream.of(v).sum();
        return sum;
    }
    @Benchmark
    public long sumPar() {
        long sum = LongStream.of(v).parallel().sum();
        return sum;
    }
    @Benchmark
    public long sumOfSquaresSeq() {
        long sum = LongStream.of(v)
            .map(d -&gt; d * d)
            .sum();
        return sum;
    }
    @Benchmark
    public long sumOfSquaresPar() {
        long sum = LongStream.of(v)
            .parallel()
            .map(d -&gt; d * d)
            .sum();
        return sum;
    }
    @Benchmark
    public long cartSeq() {
        long cart = LongStream.of(valuesHi)
            .flatMap(d -&gt; LongStream.of(valuesLo).map(dP -&gt; dP * d))
            .sum();
        return cart;
    }
    @Benchmark
    public long cartPar() {
        long cart = LongStream.of(valuesHi)
            .parallel()
            .flatMap(d -&gt; LongStream.of(valuesLo).map(dP -&gt; dP * d))
            .sum();
        return cart;
    }
    @Benchmark
    public long sumOfSquaresEvenSeq() {
        long sum = LongStream.of(v)
            .filter(x -&gt; x % 2 == 0)
            .map(x -&gt; x * x)
            .sum();
        return sum;
    }
    @Benchmark
    public long sumOfSquaresEvenPar() {
        long sum = LongStream.of(v)
            .parallel()
            .filter(x -&gt; x % 2 == 0)
            .map(x -&gt; x * x)
            .sum();
        return sum;
    }
    @Benchmark
    public long refBaseline() {
        long count = 0;
        for (int i = 0 ; i &lt; refs.length ; i++) {
            if (refs[i].num % 5 == 0 && refs[i].num % 7 == 0) {
                count++;
            }
        }
        return count;
    }
    @Benchmark
    public long refSeq() {
        long length = Stream.of(refs)
            .filter(box -&gt; box.num % 5 == 0)
            .filter(box -&gt; box.num % 7 == 0)
            .count();
        return length;
    }
    @Benchmark
    public long refPar() {
        long length = Stream.of(refs)
            .parallel()
            .filter(box -&gt; box.num % 5 == 0)
            .filter(box -&gt; box.num % 7 == 0)
            .count();
        return length;
    }
}

@BenchmarkMode(Mode.AverageTime)
@OutputTimeUnit(TimeUnit.MILLISECONDS)
@Warmup(iterations = 3, time = 1, timeUnit = TimeUnit.MILLISECONDS)
@Measurement(iterations = 10, time = 1, timeUnit = TimeUnit.MILLISECONDS)
@Fork(1)
@State(Scope.Benchmark)
public class Even {
    private static final long[] VALUES = IntStream.range(0, 100_000_000)
        .mapToLong(i -&gt; (long) (i % 1000))
        .toArray();
    @Benchmark
    public long plain() {
        long acc = 0L;
        for (int idx = 0; idx &lt; Even.VALUES.length; idx++) {
            if (idx % 2 == 0) {
                acc += Even.VALUES[idx] * Even.VALUES[idx];
            }
        }
        return acc;
    }
    @Benchmark
    public long streams() {
        return LongStream.of(Even.VALUES)
            .filter(x -&gt; x % 2L == 0L)
            .map(x -&gt; x * x)
            .sum();
    }
}

@BenchmarkMode(Mode.AverageTime)
@OutputTimeUnit(TimeUnit.MILLISECONDS)
@Warmup(iterations = 3, time = 1, timeUnit = TimeUnit.MILLISECONDS)
@Measurement(iterations = 10, time = 1, timeUnit = TimeUnit.MILLISECONDS)
@Fork(1)
@State(Scope.Benchmark)
public class Sum {
    private static final long[] VALUES = IntStream.range(0, 100_000_000)
        .mapToLong(i -&gt; (long) (i % 1000))
        .toArray();
    @Benchmark
    public long plain() {
        final LongUnaryOperator iface = num -&gt; num * num;
        long acc = 0L;
        for (int idx = 0; idx &lt; Sum.VALUES.length ; idx++) {
            acc += iface.applyAsLong(Sum.VALUES[idx]);
        }
        return acc;
    }
    @Benchmark
    public long streams() {
        return LongStream.of(Sum.VALUES)
            .map(num -&gt; num * num)
            .sum();
    }
}</pre>
      </div>
    <div class="snippet">
      <span>Bytecode after javac 23.0.2
 <a href="after-javac.html">üîç</a></span>
      <pre></pre>
      </div>
    <div class="snippet">
      <span>Opcodes after <a href="https://www.objectionary.com/jeo-maven-plugin/disassemble-mojo.html">jeo:disassemble</a>  <a href="after-jeo-disassemble.html">üîç</a></span>
      <pre></pre>
      </div>
    <div class="snippet">
      <span>Objects after <a href="https://www.objectionary.com/opeo-maven-plugin/decompile-mojo.html">opeo:decompile</a>  <a href="after-opeo-decompile.html">üîç</a></span>
      <pre></pre>
      </div>
    <div class="snippet">
      <span>ùúë-expressions after eo:phi  <a href="after-phi.html">üîç</a></span>
      <pre></pre>
      </div>
    <!--
    <div class="snippet">
      <span>Optimized ùúë <a href="after-ineo-optimize.html">üîç</a></span>
      <pre>{after-ineo-optimize}</pre>
      </div>
    <div class="snippet">
      <span>EO Objects after eo:unphi  <span><a href="after-unphi.html">üîç</a></span>
      <pre>{after-unphi}</pre>
      </div>
    -->
    <div class="snippet">
      <span>EO Objects after ineo:staticize  <a href="after-ineo-staticize.html">üîç</a></span>
      <pre></pre>
      </div>
    <div class="snippet">
      <span>Opcodes after <a href="https://www.objectionary.com/opeo-maven-plugin/compile-mojo.html">opeo:compile</a>  <a href="after-opeo-compile.html">üîç</a></span>
      <pre></pre>
      </div>
    <div class="snippet">
      <span>Bytecode after <a href="https://www.objectionary.com/jeo-maven-plugin/assemble-mojo.html">jeo:assemble</a>  <a href="after-jeo-assemble.html">üîç</a></span>
      <pre>
public class org.eolang.benchmark.Big {
  public org.eolang.benchmark.Big();
    Code:
       0: aload_0
       1: invokespecial #29                 // Method java/lang/Object."&lt;init&gt;":()V
       4: return

  public long plain();
    Code:
       0: lconst_0
       1: lstore_1
       2: iconst_0
       3: istore_3
       4: iload_3
       5: getstatic     #34                 // Field VALUES:[Ljava/lang/Object;
       8: arraylength
       9: if_icmpge     55
      12: getstatic     #34                 // Field VALUES:[Ljava/lang/Object;
      15: iload_3
      16: aaload
      17: checkcast     #36                 // class java/lang/String
      20: invokevirtual #40                 // Method java/lang/String.trim:()Ljava/lang/String;
      23: astore        4
      25: aload         4
      27: invokevirtual #44                 // Method java/lang/String.length:()I
      30: iconst_4
      31: if_icmpeq     37
      34: goto          49
      37: lload_1
      38: aload         4
      40: bipush        16
      42: invokestatic  #50                 // Method java/lang/Long.parseLong:(Ljava/lang/String;I)J
      45: lconst_1
      46: ladd
      47: ladd
      48: lstore_1
      49: iinc          3, 1
      52: goto          4
      55: lload_1
      56: lreturn

  public long streams();
    Code:
       0: getstatic     #34                 // Field VALUES:[Ljava/lang/Object;
       3: invokestatic  #57                 // InterfaceMethod java/util/stream/Stream.of:([Ljava/lang/Object;)Ljava/util/stream/Stream;
       6: invokedynamic #76,  0             // InvokeDynamic #0:apply:()Ljava/util/function/Function;
      11: invokeinterface #80,  2           // InterfaceMethod java/util/stream/Stream.map:(Ljava/util/function/Function;)Ljava/util/stream/Stream;
      16: invokedynamic #84,  0             // InvokeDynamic #1:apply:()Ljava/util/function/Function;
      21: invokeinterface #80,  2           // InterfaceMethod java/util/stream/Stream.map:(Ljava/util/function/Function;)Ljava/util/stream/Stream;
      26: invokedynamic #96,  0             // InvokeDynamic #2:test:()Ljava/util/function/Predicate;
      31: invokeinterface #100,  2          // InterfaceMethod java/util/stream/Stream.filter:(Ljava/util/function/Predicate;)Ljava/util/stream/Stream;
      36: invokedynamic #107,  0            // InvokeDynamic #3:apply:()Ljava/util/function/Function;
      41: invokeinterface #80,  2           // InterfaceMethod java/util/stream/Stream.map:(Ljava/util/function/Function;)Ljava/util/stream/Stream;
      46: invokedynamic #119,  0            // InvokeDynamic #4:applyAsLong:()Ljava/util/function/ToLongFunction;
      51: invokeinterface #123,  2          // InterfaceMethod java/util/stream/Stream.mapToLong:(Ljava/util/function/ToLongFunction;)Ljava/util/stream/LongStream;
      56: invokeinterface #128,  1          // InterfaceMethod java/util/stream/LongStream.sum:()J
      61: lreturn

  static {};
    Code:
       0: lconst_0
       1: ldc2_w        #146                // long 10000000l
       4: invokestatic  #151                // InterfaceMethod java/util/stream/LongStream.range:(JJ)Ljava/util/stream/LongStream;
       7: invokeinterface #155,  1          // InterfaceMethod java/util/stream/LongStream.boxed:()Ljava/util/stream/Stream;
      12: invokedynamic #160,  0            // InvokeDynamic #5:apply:()Ljava/util/function/Function;
      17: invokeinterface #80,  2           // InterfaceMethod java/util/stream/Stream.map:(Ljava/util/function/Function;)Ljava/util/stream/Stream;
      22: invokeinterface #164,  1          // InterfaceMethod java/util/stream/Stream.toArray:()[Ljava/lang/Object;
      27: putstatic     #34                 // Field VALUES:[Ljava/lang/Object;
      30: return
}

public class org.eolang.benchmark.Cotl\$Ref {
  public int num;

  public org.eolang.benchmark.Cotl\$Ref(int);
    Code:
       0: aload_0
       1: invokespecial #12                 // Method java/lang/Object."&lt;init&gt;":()V
       4: aload_0
       5: iload_1
       6: putfield      #14                 // Field num:I
       9: return
}

public class org.eolang.benchmark.Cotl {
  public static final int N;

  static long[] v;

  static long[] valuesLo;

  static long[] valuesHi;

  static org.eolang.benchmark.Cotl\$Ref[] refs;

  public org.eolang.benchmark.Cotl();
    Code:
       0: aload_0
       1: invokespecial #34                 // Method java/lang/Object."&lt;init&gt;":()V
       4: return

  public long sumBaseline();
    Code:
       0: lconst_0
       1: lstore_1
       2: iconst_0
       3: istore_3
       4: iload_3
       5: getstatic     #39                 // Field v:[J
       8: arraylength
       9: if_icmpge     26
      12: lload_1
      13: getstatic     #39                 // Field v:[J
      16: iload_3
      17: laload
      18: ladd
      19: lstore_1
      20: iinc          3, 1
      23: goto          4
      26: lload_1
      27: lreturn

  public long sumOfSquaresBaseline();
    Code:
       0: lconst_0
       1: lstore_1
       2: iconst_0
       3: istore_3
       4: iload_3
       5: getstatic     #39                 // Field v:[J
       8: arraylength
       9: if_icmpge     32
      12: lload_1
      13: getstatic     #39                 // Field v:[J
      16: iload_3
      17: laload
      18: getstatic     #39                 // Field v:[J
      21: iload_3
      22: laload
      23: lmul
      24: ladd
      25: lstore_1
      26: iinc          3, 1
      29: goto          4
      32: lload_1
      33: lreturn

  public long cartBaseline();
    Code:
       0: lconst_0
       1: lstore_1
       2: iconst_0
       3: istore_3
       4: iload_3
       5: getstatic     #43                 // Field valuesHi:[J
       8: arraylength
       9: if_icmpge     51
      12: iconst_0
      13: istore        4
      15: iload         4
      17: getstatic     #45                 // Field valuesLo:[J
      20: arraylength
      21: if_icmpge     45
      24: lload_1
      25: getstatic     #43                 // Field valuesHi:[J
      28: iload_3
      29: laload
      30: getstatic     #45                 // Field valuesLo:[J
      33: iload         4
      35: laload
      36: lmul
      37: ladd
      38: lstore_1
      39: iinc          4, 1
      42: goto          15
      45: iinc          3, 1
      48: goto          4
      51: lload_1
      52: lreturn

  public long sumOfSquaresEvenBaseline();
    Code:
       0: lconst_0
       1: lstore_1
       2: iconst_0
       3: istore_3
       4: iload_3
       5: getstatic     #39                 // Field v:[J
       8: arraylength
       9: if_icmpge     46
      12: getstatic     #39                 // Field v:[J
      15: iload_3
      16: laload
      17: ldc2_w        #47                 // long 2l
      20: lrem
      21: lconst_0
      22: lcmp
      23: ifne          40
      26: lload_1
      27: getstatic     #39                 // Field v:[J
      30: iload_3
      31: laload
      32: getstatic     #39                 // Field v:[J
      35: iload_3
      36: laload
      37: lmul
      38: ladd
      39: lstore_1
      40: iinc          3, 1
      43: goto          4
      46: lload_1
      47: lreturn

  public long sumSeq();
    Code:
       0: getstatic     #39                 // Field v:[J
       3: invokestatic  #55                 // InterfaceMethod java/util/stream/LongStream.of:([J)Ljava/util/stream/LongStream;
       6: invokeinterface #58,  1           // InterfaceMethod java/util/stream/LongStream.sum:()J
      11: lstore_1
      12: lload_1
      13: lreturn

  public long sumPar();
    Code:
       0: getstatic     #39                 // Field v:[J
       3: invokestatic  #55                 // InterfaceMethod java/util/stream/LongStream.of:([J)Ljava/util/stream/LongStream;
       6: invokeinterface #63,  1           // InterfaceMethod java/util/stream/LongStream.parallel:()Ljava/util/stream/LongStream;
      11: invokeinterface #58,  1           // InterfaceMethod java/util/stream/LongStream.sum:()J
      16: lstore_1
      17: lload_1
      18: lreturn

  public long sumOfSquaresSeq();
    Code:
       0: getstatic     #39                 // Field v:[J
       3: invokestatic  #55                 // InterfaceMethod java/util/stream/LongStream.of:([J)Ljava/util/stream/LongStream;
       6: invokedynamic #81,  0             // InvokeDynamic #0:applyAsLong:()Ljava/util/function/LongUnaryOperator;
      11: invokeinterface #85,  2           // InterfaceMethod java/util/stream/LongStream.map:(Ljava/util/function/LongUnaryOperator;)Ljava/util/stream/LongStream;
      16: invokeinterface #58,  1           // InterfaceMethod java/util/stream/LongStream.sum:()J
      21: lstore_1
      22: lload_1
      23: lreturn

  public long sumOfSquaresPar();
    Code:
       0: getstatic     #39                 // Field v:[J
       3: invokestatic  #55                 // InterfaceMethod java/util/stream/LongStream.of:([J)Ljava/util/stream/LongStream;
       6: invokeinterface #63,  1           // InterfaceMethod java/util/stream/LongStream.parallel:()Ljava/util/stream/LongStream;
      11: invokedynamic #91,  0             // InvokeDynamic #1:applyAsLong:()Ljava/util/function/LongUnaryOperator;
      16: invokeinterface #85,  2           // InterfaceMethod java/util/stream/LongStream.map:(Ljava/util/function/LongUnaryOperator;)Ljava/util/stream/LongStream;
      21: invokeinterface #58,  1           // InterfaceMethod java/util/stream/LongStream.sum:()J
      26: lstore_1
      27: lload_1
      28: lreturn

  public long cartSeq();
    Code:
       0: getstatic     #43                 // Field valuesHi:[J
       3: invokestatic  #55                 // InterfaceMethod java/util/stream/LongStream.of:([J)Ljava/util/stream/LongStream;
       6: invokedynamic #104,  0            // InvokeDynamic #2:apply:()Ljava/util/function/LongFunction;
      11: invokeinterface #108,  2          // InterfaceMethod java/util/stream/LongStream.flatMap:(Ljava/util/function/LongFunction;)Ljava/util/stream/LongStream;
      16: invokeinterface #58,  1           // InterfaceMethod java/util/stream/LongStream.sum:()J
      21: lstore_1
      22: lload_1
      23: lreturn

  public long cartPar();
    Code:
       0: getstatic     #43                 // Field valuesHi:[J
       3: invokestatic  #55                 // InterfaceMethod java/util/stream/LongStream.of:([J)Ljava/util/stream/LongStream;
       6: invokeinterface #63,  1           // InterfaceMethod java/util/stream/LongStream.parallel:()Ljava/util/stream/LongStream;
      11: invokedynamic #114,  0            // InvokeDynamic #3:apply:()Ljava/util/function/LongFunction;
      16: invokeinterface #108,  2          // InterfaceMethod java/util/stream/LongStream.flatMap:(Ljava/util/function/LongFunction;)Ljava/util/stream/LongStream;
      21: invokeinterface #58,  1           // InterfaceMethod java/util/stream/LongStream.sum:()J
      26: lstore_1
      27: lload_1
      28: lreturn

  public long sumOfSquaresEvenSeq();
    Code:
       0: getstatic     #39                 // Field v:[J
       3: invokestatic  #55                 // InterfaceMethod java/util/stream/LongStream.of:([J)Ljava/util/stream/LongStream;
       6: invokedynamic #125,  0            // InvokeDynamic #4:test:()Ljava/util/function/LongPredicate;
      11: invokeinterface #129,  2          // InterfaceMethod java/util/stream/LongStream.filter:(Ljava/util/function/LongPredicate;)Ljava/util/stream/LongStream;
      16: invokedynamic #134,  0            // InvokeDynamic #5:applyAsLong:()Ljava/util/function/LongUnaryOperator;
      21: invokeinterface #85,  2           // InterfaceMethod java/util/stream/LongStream.map:(Ljava/util/function/LongUnaryOperator;)Ljava/util/stream/LongStream;
      26: invokeinterface #58,  1           // InterfaceMethod java/util/stream/LongStream.sum:()J
      31: lstore_1
      32: lload_1
      33: lreturn

  public long sumOfSquaresEvenPar();
    Code:
       0: getstatic     #39                 // Field v:[J
       3: invokestatic  #55                 // InterfaceMethod java/util/stream/LongStream.of:([J)Ljava/util/stream/LongStream;
       6: invokeinterface #63,  1           // InterfaceMethod java/util/stream/LongStream.parallel:()Ljava/util/stream/LongStream;
      11: invokedynamic #140,  0            // InvokeDynamic #6:test:()Ljava/util/function/LongPredicate;
      16: invokeinterface #129,  2          // InterfaceMethod java/util/stream/LongStream.filter:(Ljava/util/function/LongPredicate;)Ljava/util/stream/LongStream;
      21: invokedynamic #145,  0            // InvokeDynamic #7:applyAsLong:()Ljava/util/function/LongUnaryOperator;
      26: invokeinterface #85,  2           // InterfaceMethod java/util/stream/LongStream.map:(Ljava/util/function/LongUnaryOperator;)Ljava/util/stream/LongStream;
      31: invokeinterface #58,  1           // InterfaceMethod java/util/stream/LongStream.sum:()J
      36: lstore_1
      37: lload_1
      38: lreturn

  public long refBaseline();
    Code:
       0: lconst_0
       1: lstore_1
       2: iconst_0
       3: istore_3
       4: iload_3
       5: getstatic     #148                // Field refs:[Lorg/eolang/benchmark/Cotl\$Ref;
       8: arraylength
       9: if_icmpge     49
      12: getstatic     #148                // Field refs:[Lorg/eolang/benchmark/Cotl\$Ref;
      15: iload_3
      16: aaload
      17: getfield      #153                // Field org/eolang/benchmark/Cotl\$Ref.num:I
      20: iconst_5
      21: irem
      22: ifne          43
      25: getstatic     #148                // Field refs:[Lorg/eolang/benchmark/Cotl\$Ref;
      28: iload_3
      29: aaload
      30: getfield      #153                // Field org/eolang/benchmark/Cotl\$Ref.num:I
      33: bipush        7
      35: irem
      36: ifne          43
      39: lload_1
      40: lconst_1
      41: ladd
      42: lstore_1
      43: iinc          3, 1
      46: goto          4
      49: lload_1
      50: lreturn

  public long refSeq();
    Code:
       0: getstatic     #148                // Field refs:[Lorg/eolang/benchmark/Cotl\$Ref;
       3: invokestatic  #159                // InterfaceMethod java/util/stream/Stream.of:([Ljava/lang/Object;)Ljava/util/stream/Stream;
       6: invokedynamic #170,  0            // InvokeDynamic #8:test:()Ljava/util/function/Predicate;
      11: invokeinterface #173,  2          // InterfaceMethod java/util/stream/Stream.filter:(Ljava/util/function/Predicate;)Ljava/util/stream/Stream;
      16: invokedynamic #178,  0            // InvokeDynamic #9:test:()Ljava/util/function/Predicate;
      21: invokeinterface #173,  2          // InterfaceMethod java/util/stream/Stream.filter:(Ljava/util/function/Predicate;)Ljava/util/stream/Stream;
      26: invokeinterface #181,  1          // InterfaceMethod java/util/stream/Stream.count:()J
      31: lstore_1
      32: lload_1
      33: lreturn

  public long refPar();
    Code:
       0: getstatic     #148                // Field refs:[Lorg/eolang/benchmark/Cotl\$Ref;
       3: invokestatic  #159                // InterfaceMethod java/util/stream/Stream.of:([Ljava/lang/Object;)Ljava/util/stream/Stream;
       6: invokeinterface #185,  1          // InterfaceMethod java/util/stream/Stream.parallel:()Ljava/util/stream/BaseStream;
      11: checkcast     #156                // class java/util/stream/Stream
      14: invokedynamic #190,  0            // InvokeDynamic #10:test:()Ljava/util/function/Predicate;
      19: invokeinterface #173,  2          // InterfaceMethod java/util/stream/Stream.filter:(Ljava/util/function/Predicate;)Ljava/util/stream/Stream;
      24: invokedynamic #195,  0            // InvokeDynamic #11:test:()Ljava/util/function/Predicate;
      29: invokeinterface #173,  2          // InterfaceMethod java/util/stream/Stream.filter:(Ljava/util/function/Predicate;)Ljava/util/stream/Stream;
      34: invokeinterface #181,  1          // InterfaceMethod java/util/stream/Stream.count:()J
      39: lstore_1
      40: lload_1
      41: lreturn

  static {};
    Code:
       0: iconst_0
       1: ldc           #24                 // int 10000000
       3: invokestatic  #228                // InterfaceMethod java/util/stream/IntStream.range:(II)Ljava/util/stream/IntStream;
       6: invokedynamic #235,  0            // InvokeDynamic #14:applyAsLong:()Ljava/util/function/IntToLongFunction;
      11: invokeinterface #239,  2          // InterfaceMethod java/util/stream/IntStream.mapToLong:(Ljava/util/function/IntToLongFunction;)Ljava/util/stream/LongStream;
      16: invokeinterface #243,  1          // InterfaceMethod java/util/stream/LongStream.toArray:()[J
      21: putstatic     #39                 // Field v:[J
      24: iconst_0
      25: bipush        10
      27: invokestatic  #228                // InterfaceMethod java/util/stream/IntStream.range:(II)Ljava/util/stream/IntStream;
      30: invokedynamic #247,  0            // InvokeDynamic #15:applyAsLong:()Ljava/util/function/IntToLongFunction;
      35: invokeinterface #239,  2          // InterfaceMethod java/util/stream/IntStream.mapToLong:(Ljava/util/function/IntToLongFunction;)Ljava/util/stream/LongStream;
      40: invokeinterface #243,  1          // InterfaceMethod java/util/stream/LongStream.toArray:()[J
      45: dup
      46: putstatic     #45                 // Field valuesLo:[J
      49: putstatic     #45                 // Field valuesLo:[J
      52: iconst_0
      53: ldc           #24                 // int 10000000
      55: invokestatic  #228                // InterfaceMethod java/util/stream/IntStream.range:(II)Ljava/util/stream/IntStream;
      58: invokedynamic #251,  0            // InvokeDynamic #16:applyAsLong:()Ljava/util/function/IntToLongFunction;
      63: invokeinterface #239,  2          // InterfaceMethod java/util/stream/IntStream.mapToLong:(Ljava/util/function/IntToLongFunction;)Ljava/util/stream/LongStream;
      68: invokeinterface #243,  1          // InterfaceMethod java/util/stream/LongStream.toArray:()[J
      73: putstatic     #43                 // Field valuesHi:[J
      76: iconst_0
      77: ldc           #24                 // int 10000000
      79: invokestatic  #228                // InterfaceMethod java/util/stream/IntStream.range:(II)Ljava/util/stream/IntStream;
      82: invokedynamic #260,  0            // InvokeDynamic #17:apply:()Ljava/util/function/IntFunction;
      87: invokeinterface #264,  2          // InterfaceMethod java/util/stream/IntStream.mapToObj:(Ljava/util/function/IntFunction;)Ljava/util/stream/Stream;
      92: invokedynamic #269,  0            // InvokeDynamic #18:apply:()Ljava/util/function/IntFunction;
      97: invokeinterface #272,  2          // InterfaceMethod java/util/stream/Stream.toArray:(Ljava/util/function/IntFunction;)[Ljava/lang/Object;
     102: checkcast     #273                // class "[Lorg/eolang/benchmark/Cotl\$Ref;"
     105: putstatic     #148                // Field refs:[Lorg/eolang/benchmark/Cotl\$Ref;
     108: return
}

public class org.eolang.benchmark.Even {
  public org.eolang.benchmark.Even();
    Code:
       0: aload_0
       1: invokespecial #29                 // Method java/lang/Object."&lt;init&gt;":()V
       4: return

  public long plain();
    Code:
       0: lconst_0
       1: lstore_1
       2: iconst_0
       3: istore_3
       4: iload_3
       5: getstatic     #34                 // Field VALUES:[J
       8: arraylength
       9: if_icmpge     38
      12: iload_3
      13: iconst_2
      14: irem
      15: ifne          32
      18: lload_1
      19: getstatic     #34                 // Field VALUES:[J
      22: iload_3
      23: laload
      24: getstatic     #34                 // Field VALUES:[J
      27: iload_3
      28: laload
      29: lmul
      30: ladd
      31: lstore_1
      32: iinc          3, 1
      35: goto          4
      38: lload_1
      39: lreturn

  public long streams();
    Code:
       0: getstatic     #34                 // Field VALUES:[J
       3: invokestatic  #41                 // InterfaceMethod java/util/stream/LongStream.of:([J)Ljava/util/stream/LongStream;
       6: invokedynamic #58,  0             // InvokeDynamic #0:test:()Ljava/util/function/LongPredicate;
      11: invokeinterface #62,  2           // InterfaceMethod java/util/stream/LongStream.filter:(Ljava/util/function/LongPredicate;)Ljava/util/stream/LongStream;
      16: invokedynamic #72,  0             // InvokeDynamic #1:applyAsLong:()Ljava/util/function/LongUnaryOperator;
      21: invokeinterface #76,  2           // InterfaceMethod java/util/stream/LongStream.map:(Ljava/util/function/LongUnaryOperator;)Ljava/util/stream/LongStream;
      26: invokeinterface #79,  1           // InterfaceMethod java/util/stream/LongStream.sum:()J
      31: lreturn

  static {};
    Code:
       0: iconst_0
       1: ldc           #86                 // int 100000000
       3: invokestatic  #92                 // InterfaceMethod java/util/stream/IntStream.range:(II)Ljava/util/stream/IntStream;
       6: invokedynamic #99,  0             // InvokeDynamic #2:applyAsLong:()Ljava/util/function/IntToLongFunction;
      11: invokeinterface #103,  2          // InterfaceMethod java/util/stream/IntStream.mapToLong:(Ljava/util/function/IntToLongFunction;)Ljava/util/stream/LongStream;
      16: invokeinterface #107,  1          // InterfaceMethod java/util/stream/LongStream.toArray:()[J
      21: putstatic     #34                 // Field VALUES:[J
      24: return
}

public class org.eolang.benchmark.Sum {
  public org.eolang.benchmark.Sum();
    Code:
       0: aload_0
       1: invokespecial #29                 // Method java/lang/Object."&lt;init&gt;":()V
       4: return

  public long plain();
    Code:
       0: invokedynamic #49,  0             // InvokeDynamic #0:applyAsLong:()Ljava/util/function/LongUnaryOperator;
       5: astore_1
       6: lconst_0
       7: lstore_2
       8: iconst_0
       9: istore        4
      11: iload         4
      13: getstatic     #53                 // Field VALUES:[J
      16: arraylength
      17: if_icmpge     41
      20: lload_2
      21: aload_1
      22: getstatic     #53                 // Field VALUES:[J
      25: iload         4
      27: laload
      28: invokeinterface #55,  3           // InterfaceMethod java/util/function/LongUnaryOperator.applyAsLong:(J)J
      33: ladd
      34: lstore_2
      35: iinc          4, 1
      38: goto          11
      41: lload_2
      42: lreturn

  public long streams();
    Code:
       0: getstatic     #53                 // Field VALUES:[J
       3: invokestatic  #62                 // InterfaceMethod java/util/stream/LongStream.of:([J)Ljava/util/stream/LongStream;
       6: invokedynamic #67,  0             // InvokeDynamic #1:applyAsLong:()Ljava/util/function/LongUnaryOperator;
      11: invokeinterface #71,  2           // InterfaceMethod java/util/stream/LongStream.map:(Ljava/util/function/LongUnaryOperator;)Ljava/util/stream/LongStream;
      16: invokeinterface #74,  1           // InterfaceMethod java/util/stream/LongStream.sum:()J
      21: lreturn

  static {};
    Code:
       0: iconst_0
       1: ldc           #79                 // int 100000000
       3: invokestatic  #85                 // InterfaceMethod java/util/stream/IntStream.range:(II)Ljava/util/stream/IntStream;
       6: invokedynamic #92,  0             // InvokeDynamic #2:applyAsLong:()Ljava/util/function/IntToLongFunction;
      11: invokeinterface #96,  2           // InterfaceMethod java/util/stream/IntStream.mapToLong:(Ljava/util/function/IntToLongFunction;)Ljava/util/stream/LongStream;
      16: invokeinterface #100,  1          // InterfaceMethod java/util/stream/LongStream.toArray:()[J
      21: putstatic     #53                 // Field VALUES:[J
      24: return
}</pre>
      </div>
    <div class="snippet">
      <span>Java after <a href="https://github.com/intoolswetrust/jd-cli">jd-cli</a>  <a href="after-jd.html">üîç</a></span>
      <pre>package org.eolang.benchmark;
import java.util.concurrent.TimeUnit;
import java.util.stream.LongStream;
import java.util.stream.Stream;
import org.openjdk.jmh.annotations.Benchmark;
import org.openjdk.jmh.annotations.BenchmarkMode;
import org.openjdk.jmh.annotations.Fork;
import org.openjdk.jmh.annotations.Measurement;
import org.openjdk.jmh.annotations.Mode;
import org.openjdk.jmh.annotations.OutputTimeUnit;
import org.openjdk.jmh.annotations.Scope;
import org.openjdk.jmh.annotations.State;
import org.openjdk.jmh.annotations.Warmup;
@BenchmarkMode({Mode.AverageTime})
@OutputTimeUnit(TimeUnit.MILLISECONDS)
@Warmup(iterations = 5, time = 10, timeUnit = TimeUnit.MILLISECONDS)
@Measurement(iterations = 10, time = 10, timeUnit = TimeUnit.MILLISECONDS)
@State(Scope.Benchmark)
@Fork(2)
public class Big {
  private static final Object[] VALUES;
  
  static {
    VALUES = LongStream.range(0L, 10000000L).boxed().map(x -&gt; String.format("%04x", new Object[] { x })).toArray();
  }
  
  @Benchmark
  public long plain() {
    long acc = 0L;
    for (int idx = 0; idx &lt; VALUES.length; idx++) {
      String str = ((String)VALUES[idx]).trim();
      if (str.length() == 4)
        acc += Long.parseLong(str, 16) + 1L; 
    } 
    return acc;
  }
  
  @Benchmark
  public long streams() {
    return Stream.&lt;Object&gt;of(VALUES)
      .map(obj -&gt; (String)obj)
      .map(String::trim)
      .filter(str -&gt; (str.length() == 4))
      .map(str -&gt; Long.valueOf(Long.parseLong(str, 16) + 1L))
      .mapToLong(num -&gt; num.longValue())
      .sum();
  }
}

package org.eolang.benchmark;
import java.util.concurrent.TimeUnit;
import java.util.stream.IntStream;
import java.util.stream.LongStream;
import java.util.stream.Stream;
import org.openjdk.jmh.annotations.Benchmark;
import org.openjdk.jmh.annotations.BenchmarkMode;
import org.openjdk.jmh.annotations.Measurement;
import org.openjdk.jmh.annotations.Mode;
import org.openjdk.jmh.annotations.OutputTimeUnit;
import org.openjdk.jmh.annotations.Scope;
import org.openjdk.jmh.annotations.State;
import org.openjdk.jmh.annotations.Warmup;
@OutputTimeUnit(TimeUnit.MILLISECONDS)
@BenchmarkMode({Mode.AverageTime})
@Warmup(iterations = 5, time = 10, timeUnit = TimeUnit.MILLISECONDS)
@Measurement(iterations = 10, time = 10, timeUnit = TimeUnit.MILLISECONDS)
@State(Scope.Benchmark)
public class Cotl {
  public static final int N = 10000000;
  
  static long[] v;
  
  static long[] valuesLo;
  
  static long[] valuesHi;
  
  static Ref[] refs;
  
  public static class Ref {
    public int num;
    
    public Ref(int num) {
      this.num = num;
    }
  }
  
  static {
    v = IntStream.range(0, 10000000).mapToLong(i -&gt; (i % 1000)).toArray();
    valuesLo = IntStream.range(0, 10).mapToLong(i -&gt; i).toArray();
    valuesHi = IntStream.range(0, 10000000).mapToLong(i -&gt; i).toArray();
    refs = (Ref[])IntStream.range(0, 10000000).mapToObj(n -&gt; new Ref(n)).toArray(size -&gt; new Ref[size]);
  }
  
  @Benchmark
  public long sumBaseline() {
    long acc = 0L;
    for (int i = 0; i &lt; v.length; i++)
      acc += v[i]; 
    return acc;
  }
  
  @Benchmark
  public long sumOfSquaresBaseline() {
    long acc = 0L;
    for (int i = 0; i &lt; v.length; i++)
      acc += v[i] * v[i]; 
    return acc;
  }
  
  @Benchmark
  public long cartBaseline() {
    long cart = 0L;
    for (int d = 0; d &lt; valuesHi.length; d++) {
      for (int dp = 0; dp &lt; valuesLo.length; dp++)
        cart += valuesHi[d] * valuesLo[dp]; 
    } 
    return cart;
  }
  
  @Benchmark
  public long sumOfSquaresEvenBaseline() {
    long acc = 0L;
    for (int i = 0; i &lt; v.length; i++) {
      if (v[i] % 2L == 0L)
        acc += v[i] * v[i]; 
    } 
    return acc;
  }
  
  @Benchmark
  public long sumSeq() {
    long sum = LongStream.of(v).sum();
    return sum;
  }
  
  @Benchmark
  public long sumPar() {
    long sum = LongStream.of(v).parallel().sum();
    return sum;
  }
  
  @Benchmark
  public long sumOfSquaresSeq() {
    long sum = LongStream.of(v).map(d -&gt; d * d).sum();
    return sum;
  }
  
  @Benchmark
  public long sumOfSquaresPar() {
    long sum = LongStream.of(v).parallel().map(d -&gt; d * d).sum();
    return sum;
  }
  
  @Benchmark
  public long cartSeq() {
    long cart = LongStream.of(valuesHi).flatMap(d -&gt; LongStream.of(valuesLo).map(())).sum();
    return cart;
  }
  
  @Benchmark
  public long cartPar() {
    long cart = LongStream.of(valuesHi).parallel().flatMap(d -&gt; LongStream.of(valuesLo).map(())).sum();
    return cart;
  }
  
  @Benchmark
  public long sumOfSquaresEvenSeq() {
    long sum = LongStream.of(v).filter(x -&gt; (x % 2L == 0L)).map(x -&gt; x * x).sum();
    return sum;
  }
  
  @Benchmark
  public long sumOfSquaresEvenPar() {
    long sum = LongStream.of(v).parallel().filter(x -&gt; (x % 2L == 0L)).map(x -&gt; x * x).sum();
    return sum;
  }
  
  @Benchmark
  public long refBaseline() {
    long count = 0L;
    for (int i = 0; i &lt; refs.length; i++) {
      if ((refs[i]).num % 5 == 0 && (refs[i]).num % 7 == 0)
        count++; 
    } 
    return count;
  }
  
  @Benchmark
  public long refSeq() {
    long length = Stream.&lt;Ref&gt;of(refs).filter(box -&gt; (box.num % 5 == 0)).filter(box -&gt; (box.num % 7 == 0)).count();
    return length;
  }
  
  @Benchmark
  public long refPar() {
    long length = Stream.&lt;Ref&gt;of(refs).parallel().filter(box -&gt; (box.num % 5 == 0)).filter(box -&gt; (box.num % 7 == 0)).count();
    return length;
  }
}

package org.eolang.benchmark;
import java.util.concurrent.TimeUnit;
import java.util.stream.IntStream;
import java.util.stream.LongStream;
import org.openjdk.jmh.annotations.Benchmark;
import org.openjdk.jmh.annotations.BenchmarkMode;
import org.openjdk.jmh.annotations.Fork;
import org.openjdk.jmh.annotations.Measurement;
import org.openjdk.jmh.annotations.Mode;
import org.openjdk.jmh.annotations.OutputTimeUnit;
import org.openjdk.jmh.annotations.Scope;
import org.openjdk.jmh.annotations.State;
import org.openjdk.jmh.annotations.Warmup;
@BenchmarkMode({Mode.AverageTime})
@OutputTimeUnit(TimeUnit.MILLISECONDS)
@Warmup(iterations = 3, time = 1, timeUnit = TimeUnit.MILLISECONDS)
@Measurement(iterations = 10, time = 1, timeUnit = TimeUnit.MILLISECONDS)
@Fork(1)
@State(Scope.Benchmark)
public class Even {
  private static final long[] VALUES;
  
  static {
    VALUES = IntStream.range(0, 100000000).mapToLong(i -&gt; (i % 1000)).toArray();
  }
  
  @Benchmark
  public long plain() {
    long acc = 0L;
    for (int idx = 0; idx &lt; VALUES.length; idx++) {
      if (idx % 2 == 0)
        acc += VALUES[idx] * VALUES[idx]; 
    } 
    return acc;
  }
  
  @Benchmark
  public long streams() {
    return LongStream.of(VALUES)
      .filter(x -&gt; (x % 2L == 0L))
      .map(x -&gt; x * x)
      .sum();
  }
}

package org.eolang.benchmark;
import java.util.concurrent.TimeUnit;
import java.util.function.LongUnaryOperator;
import java.util.stream.IntStream;
import java.util.stream.LongStream;
import org.openjdk.jmh.annotations.Benchmark;
import org.openjdk.jmh.annotations.BenchmarkMode;
import org.openjdk.jmh.annotations.Fork;
import org.openjdk.jmh.annotations.Measurement;
import org.openjdk.jmh.annotations.Mode;
import org.openjdk.jmh.annotations.OutputTimeUnit;
import org.openjdk.jmh.annotations.Scope;
import org.openjdk.jmh.annotations.State;
import org.openjdk.jmh.annotations.Warmup;
@BenchmarkMode({Mode.AverageTime})
@OutputTimeUnit(TimeUnit.MILLISECONDS)
@Warmup(iterations = 3, time = 1, timeUnit = TimeUnit.MILLISECONDS)
@Measurement(iterations = 10, time = 1, timeUnit = TimeUnit.MILLISECONDS)
@Fork(1)
@State(Scope.Benchmark)
public class Sum {
  private static final long[] VALUES;
  
  static {
    VALUES = IntStream.range(0, 100000000).mapToLong(i -&gt; (i % 1000)).toArray();
  }
  
  @Benchmark
  public long plain() {
    LongUnaryOperator iface = num -&gt; num * num;
    long acc = 0L;
    for (int idx = 0; idx &lt; VALUES.length; idx++)
      acc += iface.applyAsLong(VALUES[idx]); 
    return acc;
  }
  
  @Benchmark
  public long streams() {
    return LongStream.of(VALUES)
      .map(num -&gt; num * num)
      .sum();
  }
}</pre>
      </div>
  </section>
</body>
</html>
